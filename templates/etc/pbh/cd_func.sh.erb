## README ########################################################
##                                                              ##
## This script is being managed by Puppet Master, don't modify! ##
##                                                              ##
########################################### by Mihai Cornateanu ##
cd_func ()
{
	local x2 the_new_dir adir index
	local -i cnt
	if [[ $1 ==  "--" ]]; then
		dirs -v
		return 0
	fi
	the_new_dir=$1
	[[ -z $1 ]] && the_new_dir=$HOME
	if [[ ${the_new_dir:0:1} == '-' ]]; then
		index=${the_new_dir:1}
		[[ -z $index ]] && index=1
		adir=$(dirs +$index)
		[[ -z $adir ]] && return 1
		the_new_dir=$adir
	fi
	[[ ${the_new_dir:0:1} == '~' ]] && the_new_dir="${HOME}${the_new_dir:1}"
	pushd "${the_new_dir}" 1> /dev/null 2> /dev/null
	[[ $? -ne 0 ]] && return 1
	the_new_dir=$(pwd)
	popd -n +11 2>/dev/null 1>/dev/null
	for ((cnt=1; cnt <= 10; cnt++)); do
		x2=$(dirs +${cnt} 2>/dev/null)
		[[ $? -ne 0 ]] && return 0
		[[ ${x2:0:1} == '~' ]] && x2="${HOME}${x2:1}"
		if [[ "${x2}" == "${the_new_dir}" ]]; then
			popd -n +$cnt 2>/dev/null 1>/dev/null
			cnt=cnt-1
		fi
	done
	return 0
}
alias cd=cd_func
if [[ $BASH_VERSION > "2.05a" ]]; then
	bind -x "\"\C-w\":cd_func -- ;"
fi
##################################################################
##    10-NOV-2004 - Petar Marinov @ http://geocities.com/h2428  ##
##    24-AUG-2015 - Mihai Cornateanu @ http://www.itmanager.ro  ##
##################################################################
